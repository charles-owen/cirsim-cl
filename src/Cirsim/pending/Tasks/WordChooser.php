<?php
/**
 * @file
 * Word chooser for tasks based on a 16 bit subset alphabet.
 */

namespace Cirsim\Tasks;


class WordChooser extends \Assignments\GradeExtra {

	public function present(\User $user) {
		$this->user = $user;
		$name = $user->get_displayname();
		$word = $this->get_word($user);
		return "<p>The secret word for $name is $word</p>";
	}

	public function get_word(\User $user) {
		$selector = new \User\Selector($user, "WordChooser");

		$words = array_merge($this->words7(), $this->words8());
		$ndx = $selector->get_rand() % count($words);
		$word = $words[$ndx];
		return strtoupper($word);
	}

	public function present_table() {
		$html = <<<HTML
<table>
<tr><th>Letter</th><th>Code</th></tr>
HTML;

		for($i=0; $i<count($this->letters); $i++) {
			$letter = $this->letters[$i];
			$binary = sprintf("%04b", $i);
			$html .= "<tr><td class=\"center\">$letter</td><td>$binary</td></tr>";
		}

		$html .= "</table>";
		return $html;
	}

	private $user;

	private $letters = array('A', 'C', 'D', 'E', 'F', 'H', 'I',
		'L', 'M', 'N', 'O', 'R', 'S', 'T',
		'U', 'W');

	private function words7() {
		return array(
			"indorse",
			"inearth",
			"inhaled",
			"inhaler",
			"inhales",
			"inlaced",
			"inlaces",
			"inroads",
			"inshore",
			"instead",
			"inthral",
			"iodates",
			"isolate",
			"isolead",
			"isotach",
			"laciest",
			"lactone",
			"lactose",
			"ladinos",
			"ladrone",
			"ladrons",
			"lancers",
			"lancets",
			"landers",
			"larchen",
			"larches",
			"lardons",
			"latched",
			"latches",
			"lathers",
			"lathier",
			"latices",
			"latinos",
			"latrine",
			"lectins",
			"lection",
			"lectors",
			"lentoid",
			"leotard",
			"lichens",
			"lichted",
			"lictors",
			"linters",
			"lithoed",
			"loaches",
			"loaders",
			"loaners",
			"loathed",
			"loather",
			"loathes",
			"located",
			"locater",
			"locates",
			"lochans",
			"loiters",
			"loricae",
			"nailers",
			"nailset",
			"narcist",
			"narcose",
			"nastier",
			"nectars",
			"neolith",
			"nerdish",
			"nerolis",
			"nidates",
			"nodical",
			"norites",
			"nostril",
			"notched",
			"notcher",
			"notches",
			"noticed",
			"noticer",
			"notices",
			"octanes",
			"oestrin",
			"oilcans",
			"oldster",
			"olestra",
			"oraches",
			"oracles",
			"oralist",
			"orceins",
			"orchids",
			"orchils",
			"ordains",
			"ordeals",
			"ordinal",
			"ordines",
			"orients",
			"ostrich",
			"rachets",
			"raciest",
			"radicel",
			"radices",
			"radicle",
			"ranched",
			"ranches",
			"ranchos",
			"randies",
			"ratches",
			"rathole",
			"ratines",
			"rations",
			"ratline",
			"ratlins",
			"realist",
			"recants",
			"recital",
			"reclads",
			"recoals",
			"recoats",
			"recoils",
			"recoins",
			"redacts",
			"redcoat",
			"redials",
			"redtail",
			"relands",
			"reliant",
			"relicts",
			"reloads",
			"reloans",
			"renails",
			"rentals",
			"rescind",
			"retails",
			"retains",
			"retinal",
			"retinas",
			"retinol",
			"retsina",
			"rialtos",
			"richens",
			"richest",
			"roached",
			"roaches",
			"roadies",
			"roasted",
			"rochets",
			"rodents",
			"rondels",
			"rosined",
			"rotches",
			"sadiron",
			"sainted",
			"salient",
			"saltern",
			"saltier",
			"saltine",
			"saltire",
			"sandier",
			"sandlot",
			"sanicle",
			"santero",
			"sarcoid",
			"sardine",
			"satchel",
			"scaleni",
			"scalier",
			"scanted",
			"scanter",
			"scarlet",
			"scarted",
			"scathed",
			"scholar",
			"scholia",
			"scolder",
			"scoriae",
			"scorned",
			"scrotal",
			"seconal",
			"secondi",
			"section",
			"senator",
			"senhora",
			"shadier",
			"shalier",
			"sheitan",
			"shoaled",
			"shoaler",
			"shorted",
			"shorten",
			"shortia",
			"shortie",
			"shrined",
			"sidecar",
			"slainte",
			"slander",
			"slanted",
			"slather",
			"slatier",
			"slither",
			"snailed",
			"snarled",
			"snorted",
			"solaced",
			"solacer",
			"solated",
			"soldier",
			"solider",
			"sordine",
			"sortied",
			"staider",
			"stained",
			"stainer",
			"stander",
			"stearic",
			"stearin",
			"stencil",
			"sternal",
			"steroid",
			"sthenia",
			"sthenic",
			"stoical",
			"stonier",
			"storied",
			"tacnode",
			"tacrine",
			"tailers",
			"tailors",
			"talcose",
			"talions",
			"taloned",
			"tanrecs",
			"tardies",
			"tarnish",
			"technos",
			"tenails",
			"tendril",
			"thalers",
			"thenars",
			"theriac",
			"therian",
			"theroid",
			"thirled",
			"thorias",
			"thorned",
			"threads",
			"throned",
			"thrones",
			"tincals",
			"tinders",
			"tirades",
			"toadies",
			"toadish",
			"tochers",
			"toenail",
			"toilers",
			"tolanes",
			"torched",
			"torches",
			"torsade",
			"trachle",
			"trailed",
			"trained",
			"tranced",
			"trances",
			"tranche",
			"trashed",
			"treason",
			"trenail",
			"triclad",
			"trindle",
			"triodes",
			"trochal",
			"troches",
			"trochil",
			"troland",
			"amniote",
			"amosite",
			"amounts",
			"anomies",
			"anthems",
			"atheism",
			"atomies",
			"atomise",
			"aunties",
			"automen",
			"etamins",
			"fainest",
			"famines",
			"fantoms",
			"fanwise",
			"fashion",
			"fathoms",
			"fishnet",
			"foments",
			"fomites",
			"fumiest",
			"fustian",
			"haemins",
			"hafnium",
			"heinous",
			"hematin",
			"hetmans",
			"homiest",
			"homines",
			"humates",
			"huswife",
			"inhumes",
			"inmates",
			"mahouts",
			"manihot",
			"manitos",
			"manitou",
			"manitus",
			"manwise",
			"mestino",
			"minuets",
			"minutes",
			"mistune",
			"moisten",
			"mutines",
			"outfawn",
			"outfish",
			"outmans",
			"outswam",
			"outswim",
			"outwash",
			"outwish",
			"santimu",
			"sentimo",
			"sfumato",
			"showman",
			"showmen",
			"sinuate",
			"soutane",
			"tameins",
			"tawnies",
			"timeous",
			"tinamou",
			"townies",
			"townish",
			"tsunami",
			"twasome",
			"unfaith",
			"unshift",
			"unwhite",
			"wahines",
			"wamefou",
			"waniest",
			"washout",
			"whitens",
			"winsome",
		);
	}

	public function words8() {
		return array(
			"achiotes",
			"aconites",
			"acridest",
			"acrolein",
			"acrolith",
			"actioner",
			"actorish",
			"adhesion",
			"aerolith",
			"ailerons",
			"airholes",
			"alienors",
			"althorns",
			"ancestor",
			"anchored",
			"anchoret",
			"aneroids",
			"anethols",
			"anoretic",
			"anorthic",
			"antherid",
			"anticold",
			"antihero",
			"archines",
			"arointed",
			"articled",
			"articles",
			"asteroid",
			"asthenic",
			"astonied",
			"caldrons",
			"calories",
			"candlers",
			"canistel",
			"canister",
			"canoeist",
			"carioles",
			"carlines",
			"carotids",
			"carotins",
			"cartoned",
			"catenoid",
			"cathodes",
			"celadons",
			"centrals",
			"centroid",
			"ceorlish",
			"ceratins",
			"ceratoid",
			"chaldron",
			"chalones",
			"chandler",
			"chanters",
			"chanties",
			"chantors",
			"chariest",
			"chariots",
			"charlies",
			"charnels",
			"chelator",
			"cheloids",
			"children",
			"chitosan",
			"chlorate",
			"chlordan",
			"chloride",
			"chlorids",
			"chlorine",
			"chlorins",
			"chlorite",
			"cholates",
			"cholents",
			"choleras",
			"cholines",
			"chorales",
			"chordate",
			"chorines",
			"chortens",
			"chortled",
			"chortles",
			"christen",
			"cilantro",
			"cisterna",
			"citadels",
			"citherns",
			"cithrens",
			"clarinet",
			"clarions",
			"cloister",
			"clothier",
			"coaliest",
			"coalshed",
			"codeinas",
			"cointers",
			"coistrel",
			"colander",
			"colinear",
			"conelrad",
			"consider",
			"contrail",
			"cordials",
			"cordites",
			"corniest",
			"cortinas",
			"costlier",
			"creatins",
			"creation",
			"daltonic",
			"darioles",
			"decrials",
			"delation",
			"delators",
			"detrains",
			"dialects",
			"diastole",
			"diatrons",
			"dicentra",
			"dicrotal",
			"dilaters",
			"dilators",
			"diocesan",
			"distance",
			"ditchers",
			"doctrine",
			"echidnas",
			"elations",
			"eldritch",
			"enactors",
			"endocast",
			"endosarc",
			"enthrals",
			"entrails",
			"erotical",
			"eschalot",
			"ethanols",
			"ethicals",
			"ethnical",
			"hadronic",
			"hairnets",
			"handiest",
			"handlers",
			"handlist",
			"hardiest",
			"hardline",
			"hardnose",
			"haricots",
			"hedonics",
			"hedonist",
			"helicons",
			"heraldic",
			"heroical",
			"hoariest",
			"holstein",
			"hordeins",
			"horniest",
			"horntail",
			"hotlines",
			"idocrase",
			"idolater",
			"inarched",
			"inarches",
			"inchoate",
			"inclosed",
			"incloser",
			"inearths",
			"inhalers",
			"inholder",
			"insolate",
			"inthrals",
			"intrados",
			"ironclad",
			"islander",
			"isolated",
			"lacertid",
			"lactones",
			"ladrones",
			"lanciers",
			"lardiest",
			"latrines",
			"lections",
			"lentoids",
			"leotards",
			"licensor",
			"loathers",
			"locaters",
			"lodestar",
			"loricate",
			"neoliths",
			"notaries",
			"notchers",
			"notecard",
			"noticers",
			"ordinals",
			"ordinate",
			"oriental",
			"ornithes",
			"rachides",
			"radicels",
			"radicles",
			"randiest",
			"ratholes",
			"rationed",
			"ratlines",
			"reaction",
			"recitals",
			"redcoats",
			"redtails",
			"relation",
			"retinals",
			"retinols",
			"sardonic",
			"scantier",
			"scenario",
			"scleroid",
			"sectoral",
			"sedation",
			"senorita",
			"shetland",
			"shitload",
			"shoalier",
			"snatched",
			"snatcher",
			"snitched",
			"snitcher",
			"societal",
			"sodalite",
			"solander",
			"sonicate",
			"stanched",
			"stancher",
			"starched",
			"sterical",
			"stolider",
			"strained",
			"tacnodes",
			"tacrines",
			"tailored",
			"telsonic",
			"tendrils",
			"theriacs",
			"therians",
			"thinclad",
			"thoraces",
			"toenails",
			"tonsilar",
			"tornadic",
			"tracheid",
			"trachled",
			"trachles",
			"tranches",
			"trenails",
			"triclads",
			"trindles",
			"trinodal",
			"trochils",
			"trochlea",
			"trolands",
			"fawniest",
			"foamiest",
			"hafniums",
			"hematins",
			"houseman",
			"humanest",
			"humanise",
			"humanist",
			"infamous",
			"inswathe",
			"manifest",
			"manihots",
			"manitous",
			"masonite",
			"misatone",
			"outfawns",
			"outshame",
			"outshine",
			"seamount",
			"showtime",
			"somewhat",
			"tinamous",
			"unfaiths",
			"unswathe",
			"wamefous",
			"womanise",
			"womanish",
			"womanist"
		);
	}
}